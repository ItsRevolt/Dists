"use strict";var ping={name:"ping",description:"Ping!",execute(e,n){console.log("received"),e.channel.send("Pong.")}},echo={name:"echo",description:"Get message content and sends it back",execute(e,n){e.channel.send(e.content)}};const fs=require("fs"),ytdl=require("ytdl-core");var queue,url;queue=[];var play={name:"play",description:"Plays audio from several sources!",execute(e,n,t){url=n[0],function(){if(!e.guild)return;url.indexOf("youtu.be")||url.indexOf("youtube.com")?(queue.push(url),1===queue.length&&function n(){new Promise((n,o)=>{const r=t.voiceConnections.find(n=>n.channel.guild.id==e.guild.id);if(!(Array.isArray(queue)&&queue.length||null===r))return r.disconnect(),e.reply("Done playing Song(s)");null===r?e.member.voiceChannel.join().then(e=>{n(e)}):(console.log("already has a connection: "+e.member.voiceChannel.connection),n(t.voiceConnections.find(n=>n.channel.guild.id==e.guild.id)))}).then(t=>{var o=queue[0];console.log(o);var r,i=ytdl(o,{filter:"audioonly"}),s=t.playStream(i);ytdl.getInfo(o).then(e=>{r=e.title}),e.client.user.setActivity(r,{type:"PLAYING"}).then(e=>console.log(`Playing: ${o}-${r}`)).catch(console.error),s.on("end",()=>{setTimeout(()=>{queue.length>0&&(queue.shift(),console.log("Fired add new song"),n())},1e3)})})}(),queue.length>=1&&ytdl.getInfo(url).then(n=>{e.reply(`[${queue.length}] Queued: ${n.title}`)})):url||e.reply("Make sure you entered a valid youtube url!")}()}};const fs$1=require("fs"),ytdl$1=require("ytdl-core");var skip={name:"skip",description:"Plays audio from several sources!",execute(e,n,t){var o=Math.min(1,queue.length);queue.splice(0,o-1);var r=t.voiceConnections.find(n=>n.channel.guild.id==e.guild.id);const i=r.player.dispatcher;r.paused&&i.resume(),i.end()}};const path=require("path"),consola=require("consola");let Files=[ping,echo,play,skip];function init(e,n){for(const n of Files)consola.success("Loaded: "+n.name),e.commands.set(n.name,n);e.on("message",t=>{if(consola.info(`{${t.author.username} Posted: ${t.content} - ${t.createdTimestamp}`),"prefix"===t.content&&t.channel.send(`Prefix is: '${n}'`),!t.content.startsWith(n)||t.author.bot)return;const o=t.content.slice(n.length).split(/ +/),r=o.shift().toLowerCase();if(e.commands.has(r))try{e.commands.get(r).execute(t,o,e)}catch(e){consola.error(e),t.reply("there was an error trying to execute that command!")}}),process.on("unhandledRejection",e=>console.error(`Uncaught Promise Rejection:\n${e}`))}const fs$2=require("fs"),Discord=require("discord.js"),consola$1=require("consola"),client=new Discord.Client;client.commands=new Discord.Collection;const low=require("lowdb"),FileSync=require("lowdb/adapters/FileSync"),adapter=new FileSync("db.json"),db=low(adapter);var prefix=db.get("prefix").value(),token=db.get("token").value();function login(){init(client,prefix),client.login(token),client.on("ready",()=>{consola$1.success("Bot Started Successfully")})}var inquirer=require("inquirer");const consola$2=require("consola"),low$1=require("lowdb"),FileSync$1=require("lowdb/adapters/FileSync"),adapter$1=new FileSync$1("db.json"),db$1=low$1(adapter$1);let questions=[{type:"input",name:"token",message:"What's your bots token?",validate:function(e){return null!==e||"string"!==e||"Please enter a valid token"}},{type:"input",name:"prefix",message:"What's prefix to get bots attention?",default:"!",validate:function(e){return null!==e||"string"!==e?e.length<=5||"Prefix must not be longer than 5 characters":"Please enter a valid prefix"}},{type:"input",name:"admingroup",message:"What is the admin group called on your server?",default:"Admin",validate:function(e){return null!==e||"string"!==e||"Please enter a valid admin group"}},{type:"input",name:"moderatorgroup",message:"What is the moderator group called on your server?",default:"Moderator",validate:function(e){return null!==e||"string"!==e||"Please enter a valid moderator group"}}];function cli(){inquirer.prompt(questions).then(e=>{db$1.set("token",e.token).write(),db$1.set("firstrun",!1).write(),db$1.set("prefix",e.prefix).write(),db$1.set("admingroup",e.admingroup).write(),db$1.set("moderatorgroup",e.moderatorgroup).write(),consola$2.success(`Your bot has been created with token: ${e.token}`),consola$2.info('To start your bot, type "node dists.js"'),consola$2.info("To add the bot to your guild, follow this link (REPLACE CLIENT_ID_HERE WITH THE ONE FROM YOUR BOT):https://discordapp.com/api/oauth2/authorize?client_id=CLIENT_ID_HERE&permissions=8&scope=bot")})}const low$2=require("lowdb"),FileSync$2=require("lowdb/adapters/FileSync"),adapter$2=new FileSync$2("db.json"),db$2=low$2(adapter$2);db$2.defaults({commandAliases:[],admingroup:"",moderatorgroup:"",permissions:[],firstrun:!0,prefix:""}).write();var firstrun=db$2.get("firstrun").value();1==firstrun?cli():login();
